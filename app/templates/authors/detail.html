{% extends "base/base.html" %}
{% set author_name = author.name or ('Auteur #' ~ author.id) %}
{% set PAGE_TITLE = author_name ~ " – Contributions" %}
{% set PAGE_DESCRIPTION = "Contributions de " ~ author_name ~ " au Cahier de doléances. Découvrez ses avis et prises de position." %}

{% block content %}

<header class="page-header">
  <h1 class="h1">{{ author_name }}</h1>
  <p class="muted">ID : {{ author.id }} • {{ author.answers_count }} réponses</p>
</header>

{% if q %}
  <p class="search-context">Filtré par « <strong>{{ q }}</strong> »</p>
{% endif %}

{# Afficher le titre de la question dans la liste des réponses #}
{% set on_question_page = false %}
{% set on_author_page = true %}
{% include "partials/_answers_list.html" with context %}

{% endblock %}

{% block jsonld %}
{% set _author_name = (author.name or ("Auteur #" ~ author.id)) %}
{% set _json = {
  "@context": "https://schema.org",
  "@type": "ProfilePage",
  "mainEntityOfPage": request.url,
  "about": { "@type": "Person", "name": _author_name, "identifier": author.id, "url": request.url }
} %}
<script type="application/ld+json">{{ _json | tojson | safe }}</script>
{% endblock %}

