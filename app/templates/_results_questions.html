{% if results|length == 0 %}
  <p class="text-sm text-[#57534E] dark:text-[#B5B8BE]">Aucun résultat.</p>
{% else %}
  <ul class="space-y-3 md:space-y-4">
    {% for r in results %}
      <li class="rounded-xl border border-[#E7E2DA] dark:border-[#242938]
                 bg-[#FFFAF2] dark:bg-[#0E1013] p-4">
        <div class="flex items-start justify-between gap-3">
          <div>
            <div class="font-[IBM_Plex_Mono] text-xs tracking-[0.06em] text-[#1F3A5F] dark:text-[#8AB6FF]">
              {{ r.question_code }}
            </div>
            <h2 class="mt-1 font-inter text-base md:text-lg leading-7">
              {% if r.prompt_hl %}
                {{ r.prompt_hl|safe }}
              {% else %}
                {{ r.prompt }}
              {% endif %}
            </h2>
          </div>
          <div class="shrink-0">
            <a href="{{ url_for('question_detail', question_id=r.id) }}"
               class="font-[IBM_Plex_Mono] text-sm underline decoration-dotted">
              Voir la question
            </a>
          </div>
        </div>

        {% if r.answers and r.answers|length > 0 %}
          <div class="mt-3 border-t border-[#E7E2DA] dark:border-[#242938] pt-3">
            <div class="font-[IBM_Plex_Mono] text-xs tracking-[0.06em] text-[#1F3A5F] dark:text-[#8AB6FF]">
              3 réponses au hasard
            </div>
            <ul class="mt-2 space-y-2">
              {% for a in r.answers %}
                <li class="text-[15px] leading-7 font-inter">
                  {{ a.text[:320] }}{% if a.text|length > 320 %}…{% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>
        {% else %}
          <p class="mt-3 text-sm text-[#57534E] dark:text-[#B5B8BE]">Pas de réponses textuelles disponibles.</p>
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  <div class="mt-4 flex items-center justify-between">
    {% if page > 1 %}
      <button
        class="rounded-lg px-3 py-2 border border-[#E7E2DA] dark:border-[#242938]"
        hx-get="{{ url_for('partials_search_questions') }}?q={{ q|urlencode }}&page={{ page-1 }}"
        hx-target="#results"
        hx-swap="innerHTML"
        hx-push-url="true">
        ← Précédent
      </button>
    {% else %}
      <span></span>
    {% endif %}

    {% if has_next %}
      <button
        class="rounded-lg px-3 py-2 border border-[#E7E2DA] dark:border-[#242938]"
        hx-get="{{ url_for('partials_search_questions') }}?q={{ q|urlencode }}&page={{ page+1 }}"
        hx-target="#results"
        hx-swap="innerHTML"
        hx-push-url="true">
        Suivant →
      </button>
    {% endif %}
  </div>
{% endif %}
