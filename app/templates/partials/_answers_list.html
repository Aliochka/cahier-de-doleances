{# Liste de réponses utilisant le composant _card.html #}
{% for a in answers %}
  {% include "answers/_card.html" with context %}
{% endfor %}

{% if has_next and next_cursor %}
  <div class="htmx-sentinel"
       {% if on_question_page and question %}
         hx-get="{{ url_for('question_detail', question_id=question.id, slug=question.slug) }}?partial=1&cursor={{ next_cursor|urlencode }}{% if q %}&q={{ q|urlencode }}{% endif %}"
       {% else %}
         hx-get="{{ url_for('search_answers') }}?q={{ q|default('')|urlencode }}&cursor={{ next_cursor|urlencode }}&partial=1"
       {% endif %}
       hx-trigger="intersect once"
       hx-target="#answers-list"
       hx-swap="beforeend">
    <div class="list-loader htmx-indicator">
      <div class="loader" title="Chargement des réponses suivantes…"></div>
      <span style="margin-left: var(--space-2); color: var(--muted);">Chargement…</span>
    </div>
  </div>
{% endif %}