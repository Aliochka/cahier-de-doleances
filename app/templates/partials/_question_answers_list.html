{# Template spécifique pour les réponses sur une page de question #}
{# Liste de réponses utilisant le composant _card.html #}
{% for a in answers %}
  {% include "answers/_card.html" with context %}
{% endfor %}

{% if has_next and next_cursor %}
  {% set load_url = url_for('question_detail', question_id=question.id, slug=question.slug) ~ "?partial=1&cursor=" ~ next_cursor|urlencode %}
  {% if q %}{% set load_url = load_url ~ "&q=" ~ q|urlencode %}{% endif %}
  
  <div class="load-more-sentinel"
       hx-get="{{ load_url }}"
       hx-trigger="intersect once"
       hx-target="#answers-list"
       hx-swap="beforeend"
>
    <div class="list-loader">
      <div class="loader" title="Chargement des réponses suivantes…"></div>
      <span style="margin-left: var(--space-2); color: var(--muted);">Chargement…</span>
    </div>
  </div>
{% endif %}